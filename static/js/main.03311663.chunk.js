(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{26:function(e){e.exports=JSON.parse('{"pages":{"Top":{"title":"\u30de\u30a4\u30f3\u30b9\u30a4\u30fc\u30d1\u30fc","mode":{"easy":"\u7c21\u5358","normal":"\u666e\u901a","hard":"\u96e3\u3057\u3044"}}},"templates":{"Board":{"reset":"\u30ea\u30bb\u30c3\u30c8","lose":"\u6557\u5317","win":"\u52dd\u5229"}}}')},29:function(e,t,a){e.exports=a(43)},34:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(24),l=a.n(r),o=(a(34),a(28)),s=a(46),u=a(25),i=a.n(u),f=a(26),m={ja:i()(f)},b=function(e){var t=e.locale,a=Object(o.a)(e,["locale"]);return c.a.createElement(s.a,Object.assign({locale:t,messages:m[t]},a))};b.defaultProps={locale:"ja"};var h=b,p=a(5),j=a(10),d=a(9),v=a(45),g=a(44),O={easy:{bomb:10,x:10,y:7},normal:{bomb:40,x:18,y:14},hard:{bomb:99,x:24,y:20}},E=function(e){var t=e.children;return c.a.createElement("div",{className:"wrapper"},t)},w=a(4),y=a(3),k=a(27),x=a.n(k),C={state:"close",bomb:!1,value:0},N=function(e){var t=e.modeInfo,a=Object(n.useState)(),r=Object(p.a)(a,2),l=r[0],o=r[1],s=Object(n.useState)(!1),u=Object(p.a)(s,2),i=u[0],f=u[1],m=Object(n.useState)(),b=Object(p.a)(m,2),h=b[0],v=b[1],O=Object(n.useState)(),E=Object(p.a)(O,2),k=E[0],N=E[1],S=Object(n.useState)(),M=Object(p.a)(S,2),B=M[0],I=M[1],A=Object(n.useCallback)((function(){for(var e=t.x,a=t.y,n=Array(e*a).fill(C),c=[],r=0;r<n.length;r+=e)c.push(n.slice(r,r+e));o(c),f(!1),v(null),N(null),I(null)}),[t]);Object(n.useEffect)((function(){A()}),[A]);var H=Object(n.useCallback)((function(){for(var e=t.x,a=t.y,n=t.bomb,c=function(e,t){for(var a=t.i,n=t.j,c=t.modeInfo,r=c.x,l=c.y,o=[];e.length>0;){var s=e.length,u=Math.floor(Math.random()*s);a*r+n+1===o.length+1&&o.push(C),o.push(e[u]),e[u]=e[s-1],e=e.slice(0,s-1)}return r*l>o.length&&o.push(C),o}([].concat(Object(y.a)(Array(n).fill(Object(w.a)({},C,{bomb:!0}))),Object(y.a)(Array(e*a-n-1).fill(C))),Object(w.a)({},h,{modeInfo:t})),r=[],l=0;l<c.length;l+=e)r.push(c.slice(l,l+e));o(function(e){for(var t=[],a=0;a<e.length;a++){for(var n=[],c=0;c<e[a].length;c++)if(e[a][c].bomb)n.push(e[a][c]);else{var r=[];c-1>=0&&a-1>=0&&r.push(e[a-1][c-1]),a-1>=0&&r.push(e[a-1][c]),c+1<e[a].length&&a-1>=0&&r.push(e[a-1][c+1]),c+1<e[a].length&&r.push(e[a][c+1]),c+1<e[a].length&&a+1<e.length&&r.push(e[a+1][c+1]),a+1<e.length&&r.push(e[a+1][c]),c-1>=0&&a+1<e.length&&r.push(e[a+1][c-1]),c-1>=0&&r.push(e[a][c-1]);var l=r.filter((function(e){return e.bomb}));n.push(Object(w.a)({},e[a][c],{value:l.length}))}t.push(n)}return t}(r))}),[h]);Object(n.useEffect)((function(){h&&(H(),f(!0))}),[h,H]),Object(n.useEffect)((function(){if(k){var e=k.i,t=k.j,a=l[e][t],n=a.bomb,c=a.state,r=a.value;if(n)I("lose");else 0===l.filter((function(e){return e.filter((function(e){return!e.bomb&&"close"===e.state})).length>0})).length?I("win"):0===r&&"open"===c&&o(function e(t,a){var n=a.i,c=a.j,r=t[n][c],l=r.state,o=r.value,s=Object(y.a)(t);return"close"===l&&(s[n][c].state="open"),0!==o?s:(c-1>=0&&n-1>=0&&"close"===s[n-1][c-1].state&&(s=e(s,{i:n-1,j:c-1})),n-1>=0&&"close"===s[n-1][c].state&&(s=e(s,{i:n-1,j:c})),c+1<s[n].length&&n-1>=0&&"close"===s[n-1][c+1].state&&(s=e(s,{i:n-1,j:c+1})),c+1<s[n].length&&"close"===s[n][c+1].state&&(s=e(s,{i:n,j:c+1})),c+1<s[n].length&&n+1<s.length&&"close"===s[n+1][c+1].state&&(s=e(s,{i:n+1,j:c+1})),n+1<s.length&&"close"===s[n+1][c].state&&(s=e(s,{i:n+1,j:c})),c-1>=0&&n+1<s.length&&"close"===s[n+1][c-1].state&&(s=e(s,{i:n+1,j:c-1})),c-1>=0&&"close"===s[n][c-1].state&&(s=e(s,{i:n,j:c-1})),s)}(l,k))}}),[k]),Object(n.useEffect)((function(){switch(B){case"lose":o(function(e){return e.map((function(e){return e.map((function(e){return e.bomb?Object(w.a)({},e,{state:"open"}):e}))}))}(l));break;case"win":o(function(e){return e.map((function(e){return e.map((function(e){return e.bomb?Object(w.a)({},e,{state:"flag"}):e}))}))}(l))}}),[B]);var J=Object(n.useCallback)((function(e,t,a){var n=Object(y.a)(l),c=Object(y.a)(n[e]);c[t]=Object(w.a)({},n[e][t],{state:a}),n[e]=c,o(n)}),[l]),T=Object(n.useCallback)((function(e,t){B||(h?"close"===l[e][t].state&&(J(e,t,"open"),N({i:e,j:t})):(v({i:e,j:t}),N({i:e,j:t})))}),[l,h,J,B]);if(Object(n.useEffect)((function(){i&&h&&T(h.i,h.j)}),[i,T,h]),!l)return c.a.createElement(c.a.Fragment,null);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,B&&c.a.createElement(g.a,{id:"templates.Board.".concat(B)})),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{onClick:function(){return A()}},c.a.createElement(g.a,{id:"templates.Board.reset"}))),c.a.createElement("div",{className:"board"},l.map((function(e,t){return c.a.createElement("div",{key:t,className:"row"},e.map((function(e,a){return c.a.createElement("div",{key:a,className:x()("cell",e.state,{bomb:e.bomb}),onClick:function(){return T(t,a)},onContextMenu:function(e){return function(e,t,a){e.preventDefault(),h&&!B&&J(t,a,function(e){switch(e){case"close":return"flag";case"flag":return"onHold";case"onHold":return"close";case"open":return e}}(l[t][a].state))}(e,t,a)}},function(e){switch(e.state){case"close":return;case"flag":return c.a.createElement(d.a,{icon:j.b});case"onHold":return c.a.createElement(d.a,{icon:j.c});case"open":return e.bomb?c.a.createElement(d.a,{icon:j.a}):0===e.value?void 0:e.value}}(e))})))}))))},S=function(e){var t=e.defaultMode,a=Object(n.useState)(t),r=Object(p.a)(a,2),l=r[0],o=r[1],s=Object(v.a)().formatMessage;return c.a.createElement(E,null,c.a.createElement("div",{className:"title"},c.a.createElement(g.a,{id:"pages.Top.title"})),c.a.createElement("div",{className:"menu"},c.a.createElement("select",{onChange:function(e){var t=e.target.value;o(t)},defaultValue:l},Object.keys(O).map((function(e,t){return c.a.createElement("option",{key:t,value:e},s({id:"pages.Top.mode.".concat(e)}))}))),c.a.createElement(d.a,{icon:j.a})," \xd7 ",O[l].bomb),c.a.createElement(N,{modeInfo:O[l]}))};S.defaultProps={defaultMode:"easy"};var M=S,B=function(){return c.a.createElement(h,null,c.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.03311663.chunk.js.map