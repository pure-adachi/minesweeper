(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{25:function(e){e.exports=JSON.parse('{"pages":{"Top":{"title":"\u30de\u30a4\u30f3\u30b9\u30a4\u30fc\u30d1\u30fc","mode":{"easy":"\u7c21\u5358","normal":"\u666e\u901a","hard":"\u96e3\u3057\u3044"}}}}')},29:function(e,t,a){e.exports=a(43)},34:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(23),l=a.n(r),o=(a(34),a(27)),s=a(46),i=a(24),u=a.n(i),m=a(25),f={ja:u()(m)},b=function(e){var t=e.locale,a=Object(o.a)(e,["locale"]);return c.a.createElement(s.a,Object.assign({locale:t,messages:f[t]},a))};b.defaultProps={locale:"ja"};var h=b,v=a(5),j=a(44),p=a(45),d={easy:{bomb:10,x:9,y:9},normal:{bomb:40,x:16,y:16},hard:{bomb:99,x:30,y:16}},g=function(e){var t=e.children;return c.a.createElement("div",{className:"wrapper"},t)},E=a(9),O=a(7),w=a(6),y=a(26),N=a.n(y),k=a(4),S=a(3),x=function(e){var t=e.numStr;return c.a.createElement("div",{className:"digital-number number-".concat(t)},c.a.createElement("div",{className:"section top"}),c.a.createElement("div",{className:"section top-right"}),c.a.createElement("div",{className:"section top-left"}),c.a.createElement("div",{className:"middle"}),c.a.createElement("div",{className:"section bottom-right"}),c.a.createElement("div",{className:"section bottom-left"}),c.a.createElement("div",{className:"section bottom"}))},C=function(e){var t=e.count;return c.a.createElement("div",{className:"bomb-count-info"},function(){var e=String(t);return("000"+e).slice(e.length)}().split("").map((function(e,t){return c.a.createElement(x,{key:t,numStr:e})})))},T=function(e){var t=e.startUnixTime,a=e.finishedUnixTime,r=Object(n.useState)(new Date),l=Object(v.a)(r,2),o=l[0],s=l[1];Object(n.useEffect)((function(){var e=setInterval((function(){s(new Date)}),1e3);return function(){return clearInterval(e)}}));var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(o.getTime()/1e3)-t;return e<0?"0":e>=999?"999":String(e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();return("000"+e).slice(e.length)};return c.a.createElement("div",{className:"time-info"},(t?a?u(i(a-t)):u():"000").split("").map((function(e,t){return c.a.createElement(x,{key:t,numStr:e})})))},M=function(e){var t=e.cell,a=t.state,n=t.bomb,r=t.value;switch(a){case"close":return c.a.createElement(c.a.Fragment,null);case"flag":return c.a.createElement(S.a,{icon:k.b});case"onHold":return c.a.createElement(S.a,{icon:k.e});case"open":return n?c.a.createElement(S.a,{icon:k.a}):0===r?c.a.createElement(c.a.Fragment,null):c.a.createElement(c.a.Fragment,null,r)}},I=function(e){var t=e.onClick,a=e.gameStatus;return c.a.createElement("div",{className:"reset-button",onClick:t},function(){switch(a){case"win":return c.a.createElement(S.a,{icon:k.d});case"lose":return c.a.createElement(S.a,{icon:k.f});default:return c.a.createElement(S.a,{icon:k.c})}}())},D={state:"close",bomb:!1,value:0},F=function(e){var t=e.modeInfo,a=Object(n.useState)(),r=Object(v.a)(a,2),l=r[0],o=r[1],s=Object(n.useState)(!1),i=Object(v.a)(s,2),u=i[0],m=i[1],f=Object(n.useState)(),b=Object(v.a)(f,2),h=b[0],j=b[1],p=Object(n.useState)(),d=Object(v.a)(p,2),g=d[0],y=d[1],k=Object(n.useState)(),S=Object(v.a)(k,2),x=S[0],F=S[1],U=Object(n.useState)(),A=Object(v.a)(U,2),H=A[0],J=A[1],B=Object(n.useState)(),P=Object(v.a)(B,2),W=P[0],V=P[1],$=Object(n.useCallback)((function(){for(var e=t.x,a=t.y,n=Array(e*a).fill(D),c=[],r=0;r<n.length;r+=e)c.push(n.slice(r,r+e));o(c),m(!1),j(null),y(null),F(null),J(null),V(null)}),[t]);Object(n.useEffect)((function(){$()}),[$]);var q=Object(n.useCallback)((function(){for(var e=t.x,a=t.y,n=t.bomb,c=function(e,t){for(var a=t.i,n=t.j,c=t.modeInfo,r=c.x,l=c.y,o=[];e.length>0;){var s=e.length,i=Math.floor(Math.random()*s);a*r+n+1===o.length+1&&o.push(D),o.push(e[i]),e[i]=e[s-1],e=e.slice(0,s-1)}return r*l>o.length&&o.push(D),o}([].concat(Object(w.a)(Array(n).fill(Object(O.a)({},D,{bomb:!0}))),Object(w.a)(Array(e*a-n-1).fill(D))),Object(O.a)({},h,{modeInfo:t})),r=[],l=0;l<c.length;l+=e)r.push(c.slice(l,l+e));o(function(e){for(var t=[],a=0;a<e.length;a++){for(var n=[],c=0;c<e[a].length;c++)if(e[a][c].bomb)n.push(e[a][c]);else{var r=[];c-1>=0&&a-1>=0&&r.push(e[a-1][c-1]),a-1>=0&&r.push(e[a-1][c]),c+1<e[a].length&&a-1>=0&&r.push(e[a-1][c+1]),c+1<e[a].length&&r.push(e[a][c+1]),c+1<e[a].length&&a+1<e.length&&r.push(e[a+1][c+1]),a+1<e.length&&r.push(e[a+1][c]),c-1>=0&&a+1<e.length&&r.push(e[a+1][c-1]),c-1>=0&&r.push(e[a][c-1]);var l=r.filter((function(e){return e.bomb}));n.push(Object(O.a)({},e[a][c],{value:l.length}))}t.push(n)}return t}(r)),J(Math.floor((new Date).getTime()/1e3))}),[h]);Object(n.useEffect)((function(){h&&(q(),m(!0))}),[h,q]),Object(n.useEffect)((function(){if(g){var e=g.i,t=g.j,a=l[e][t],n=a.bomb,c=a.state,r=a.value;if(n)F("lose");else 0===l.filter((function(e){return e.filter((function(e){return!e.bomb&&"close"===e.state})).length>0})).length?F("win"):0===r&&"open"===c&&o(function e(t,a){var n=a.i,c=a.j,r=t[n][c],l=r.state,o=r.value,s=Object(w.a)(t);return"close"===l&&(s[n][c].state="open"),0!==o?s:(c-1>=0&&n-1>=0&&"close"===s[n-1][c-1].state&&(s=e(s,{i:n-1,j:c-1})),n-1>=0&&"close"===s[n-1][c].state&&(s=e(s,{i:n-1,j:c})),c+1<s[n].length&&n-1>=0&&"close"===s[n-1][c+1].state&&(s=e(s,{i:n-1,j:c+1})),c+1<s[n].length&&"close"===s[n][c+1].state&&(s=e(s,{i:n,j:c+1})),c+1<s[n].length&&n+1<s.length&&"close"===s[n+1][c+1].state&&(s=e(s,{i:n+1,j:c+1})),n+1<s.length&&"close"===s[n+1][c].state&&(s=e(s,{i:n+1,j:c})),c-1>=0&&n+1<s.length&&"close"===s[n+1][c-1].state&&(s=e(s,{i:n+1,j:c-1})),c-1>=0&&"close"===s[n][c-1].state&&(s=e(s,{i:n,j:c-1})),s)}(l,g))}}),[g]),Object(n.useEffect)((function(){if(x){switch(x){case"lose":o(function(e){return e.map((function(e){return e.map((function(e){return e.bomb?Object(O.a)({},e,{state:"open"}):e}))}))}(l));break;case"win":o(function(e){return e.map((function(e){return e.map((function(e){return e.bomb?Object(O.a)({},e,{state:"flag"}):e}))}))}(l))}V(Math.floor((new Date).getTime()/1e3))}}),[x]);var z=Object(n.useCallback)((function(e,t,a){var n=Object(w.a)(l),c=Object(w.a)(n[e]);c[t]=Object(O.a)({},n[e][t],{state:a}),n[e]=c,o(n)}),[l]),G=Object(n.useCallback)((function(e,t){x||(h?"close"===l[e][t].state&&(z(e,t,"open"),y({i:e,j:t})):(j({i:e,j:t}),y({i:e,j:t})))}),[l,h,z,x]);if(Object(n.useEffect)((function(){u&&h&&G(h.i,h.j)}),[u,G,h]),!l)return c.a.createElement(c.a.Fragment,null);return c.a.createElement("div",{className:"board"},c.a.createElement("div",{className:"game-info"},c.a.createElement(C,{count:t.bomb}),c.a.createElement(I,{onClick:$,gameStatus:x}),c.a.createElement(T,{startUnixTime:H,finishedUnixTime:W})),c.a.createElement("div",{className:"cell-area"},l.map((function(e,t){return c.a.createElement("div",{key:t,className:"row"},e.map((function(e,a){return c.a.createElement("div",{key:a,className:N()("cell",e.state,Object(E.a)({bomb:e.bomb&&"open"===e.state,selected:g&&g.i===t&&g.j===a},"bombCount-".concat(e.value),"open"===e.state)),onClick:function(){return G(t,a)},onContextMenu:function(e){return function(e,t,a){e.preventDefault(),h&&!x&&z(t,a,function(e){switch(e){case"close":return"flag";case"flag":return"onHold";case"onHold":return"close";case"open":return e}}(l[t][a].state))}(e,t,a)}},c.a.createElement(M,{cell:e}))})))}))))},U=function(e){var t=e.defaultMode,a=Object(n.useState)(t),r=Object(v.a)(a,2),l=r[0],o=r[1],s=Object(j.a)().formatMessage;return c.a.createElement(g,null,c.a.createElement("div",{className:"title"},c.a.createElement(p.a,{id:"pages.Top.title"})),c.a.createElement("div",{className:"menu"},c.a.createElement("select",{onChange:function(e){var t=e.target.value;o(t)},defaultValue:l},Object.keys(d).map((function(e,t){return c.a.createElement("option",{key:t,value:e},s({id:"pages.Top.mode.".concat(e)}))})))),c.a.createElement(F,{modeInfo:d[l]}))};U.defaultProps={defaultMode:"easy"};var A=U,H=function(){return c.a.createElement(h,null,c.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.db5d2d98.chunk.js.map