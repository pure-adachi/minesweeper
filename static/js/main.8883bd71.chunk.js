(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{26:function(e){e.exports=JSON.parse('{"pages":{"Top":{"title":"\u30de\u30a4\u30f3\u30b9\u30a4\u30fc\u30d1\u30fc","mode":{"easy":"\u7c21\u5358","normal":"\u666e\u901a","hard":"\u96e3\u3057\u3044"}}}}')},30:function(e,t,a){e.exports=a(45)},35:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(24),r=a.n(l),o=(a(35),a(28)),i=a(48),u=a(25),s=a.n(u),m=a(26),f={ja:s()(m)},b=function(e){var t=e.locale,a=Object(o.a)(e,["locale"]);return c.a.createElement(i.a,Object.assign({locale:t,messages:f[t]},a))};b.defaultProps={locale:"ja"};var h=b,p=a(5),v=a(46),d=a(47),g={easy:{bomb:10,x:9,y:9},normal:{bomb:40,x:16,y:16},hard:{bomb:99,x:30,y:16}},j=function(e){var t=e.children;return c.a.createElement("div",{className:"wrapper"},t)},E=a(8),O=a(7),w=a(6),N=a(4),k=a(3),y=a(9),S=a.n(y),C=a(27),x=function(e){return e.map((function(e){return e.filter((function(e){return"flag"===e.state})).length})).reduce((function(e,t){return e+t}))},M=function(e){var t=e.numStr,a="number-".concat(t.replace(/-/,"minus"));return c.a.createElement("div",{className:S()("digital-number",a)},c.a.createElement("div",{className:"section top"}),c.a.createElement("div",{className:"section top-right"}),c.a.createElement("div",{className:"section top-left"}),c.a.createElement("div",{className:"middle"}),c.a.createElement("div",{className:"section bottom-right"}),c.a.createElement("div",{className:"section bottom-left"}),c.a.createElement("div",{className:"section bottom"}))},T=function(e){var t=e.count;return c.a.createElement("div",{className:"bomb-count-info"},function(){var e=String(t);return("000"+e).slice(e.length)}().split("").map((function(e,t){return c.a.createElement(M,{key:t,numStr:e})})))},I=function(e){var t=e.startUnixTime,a=e.finishedUnixTime,l=Object(n.useState)(new Date),r=Object(p.a)(l,2),o=r[0],i=r[1];Object(n.useEffect)((function(){var e=setInterval((function(){i(new Date)}),1e3);return function(){return clearInterval(e)}}));var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(o.getTime()/1e3)-t;return e<0?"0":e>=999?"999":String(e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u();return("000"+e).slice(e.length)};return c.a.createElement("div",{className:"time-info"},(t?a?s(u(a-t)):s():"000").split("").map((function(e,t){return c.a.createElement(M,{key:t,numStr:e})})))},D=function(e){var t=e.cell,a=t.state,n=t.bomb,l=t.value;switch(a){case"close":return c.a.createElement(c.a.Fragment,null);case"flag":return c.a.createElement(k.a,{icon:N.b});case"onHold":return c.a.createElement(k.a,{icon:N.e});case"open":return n?c.a.createElement(k.a,{icon:N.a}):0===l?c.a.createElement(c.a.Fragment,null):c.a.createElement(c.a.Fragment,null,l)}},F=function(e){var t=e.onClick,a=e.gameStatus;return c.a.createElement("div",{className:"reset-button",onClick:t},function(){switch(a){case"win":return c.a.createElement(k.a,{icon:N.d});case"lose":return c.a.createElement(k.a,{icon:N.f});default:return c.a.createElement(k.a,{icon:N.c})}}())},H={state:"close",bomb:!1,value:0},U=function(e){var t=e.modeInfo,a=Object(n.useState)(),l=Object(p.a)(a,2),r=l[0],o=l[1],i=Object(n.useState)(!1),u=Object(p.a)(i,2),s=u[0],m=u[1],f=Object(n.useState)(),b=Object(p.a)(f,2),h=b[0],v=b[1],d=Object(n.useState)(),g=Object(p.a)(d,2),j=g[0],y=g[1],M=Object(n.useState)(),U=Object(p.a)(M,2),A=U[0],B=U[1],J=Object(n.useState)(),P=Object(p.a)(J,2),V=P[0],W=P[1],$=Object(n.useState)(),q=Object(p.a)($,2),z=q[0],G=q[1],K=Object(n.useState)(),L=Object(p.a)(K,2),Q=L[0],R=L[1],X=Object(n.useCallback)((function(){for(var e=t.x,a=t.y,n=Array(e*a).fill(H),c=[],l=0;l<n.length;l+=e)c.push(n.slice(l,l+e));o(c),m(!1),v(null),y(null),B(null),W(null),G(null),R(null)}),[t]);Object(n.useEffect)((function(){X()}),[X]);var Y=Object(n.useCallback)((function(){for(var e=t.x,a=t.y,n=t.bomb,c=function(e,t){for(var a=t.i,n=t.j,c=t.modeInfo,l=c.x,r=c.y,o=[];e.length>0;){var i=e.length,u=Math.floor(Math.random()*i);a*l+n+1===o.length+1&&o.push(H),o.push(e[u]),e[u]=e[i-1],e=e.slice(0,i-1)}return l*r>o.length&&o.push(H),o}([].concat(Object(w.a)(Array(n).fill(Object(O.a)({},H,{bomb:!0}))),Object(w.a)(Array(e*a-n-1).fill(H))),Object(O.a)({},h,{modeInfo:t})),l=[],r=0;r<c.length;r+=e)l.push(c.slice(r,r+e));o(function(e){for(var t=[],a=0;a<e.length;a++){for(var n=[],c=0;c<e[a].length;c++)if(e[a][c].bomb)n.push(e[a][c]);else{var l=[];c-1>=0&&a-1>=0&&l.push(e[a-1][c-1]),a-1>=0&&l.push(e[a-1][c]),c+1<e[a].length&&a-1>=0&&l.push(e[a-1][c+1]),c+1<e[a].length&&l.push(e[a][c+1]),c+1<e[a].length&&a+1<e.length&&l.push(e[a+1][c+1]),a+1<e.length&&l.push(e[a+1][c]),c-1>=0&&a+1<e.length&&l.push(e[a+1][c-1]),c-1>=0&&l.push(e[a][c-1]);var r=l.filter((function(e){return e.bomb}));n.push(Object(O.a)({},e[a][c],{value:r.length}))}t.push(n)}return t}(l)),W(Math.floor((new Date).getTime()/1e3))}),[h]);Object(n.useEffect)((function(){h&&(Y(),m(!0))}),[h,Y]),Object(n.useEffect)((function(){if(j){var e=j.i,t=j.j,a=r[e][t],n=a.bomb,c=a.state,l=a.value;if(n)B("lose");else 0===r.filter((function(e){return e.filter((function(e){return!e.bomb&&"open"!==e.state})).length>0})).length?B("win"):0===l&&"open"===c&&o(function e(t,a){var n=a.i,c=a.j,l=t[n][c],r=l.state,o=l.value,i=Object(w.a)(t);return"open"!==r&&(i[n][c].state="open"),0!==o?i:(c-1>=0&&n-1>=0&&"open"!==i[n-1][c-1].state&&(i=e(i,{i:n-1,j:c-1})),n-1>=0&&"open"!==i[n-1][c].state&&(i=e(i,{i:n-1,j:c})),c+1<i[n].length&&n-1>=0&&"open"!==i[n-1][c+1].state&&(i=e(i,{i:n-1,j:c+1})),c+1<i[n].length&&"open"!==i[n][c+1].state&&(i=e(i,{i:n,j:c+1})),c+1<i[n].length&&n+1<i.length&&"open"!==i[n+1][c+1].state&&(i=e(i,{i:n+1,j:c+1})),n+1<i.length&&"open"!==i[n+1][c].state&&(i=e(i,{i:n+1,j:c})),c-1>=0&&n+1<i.length&&"open"!==i[n+1][c-1].state&&(i=e(i,{i:n+1,j:c-1})),c-1>=0&&"open"!==i[n][c-1].state&&(i=e(i,{i:n,j:c-1})),i)}(r,j))}}),[j]),Object(n.useEffect)((function(){if(A){switch(A){case"lose":o(function(e){return e.map((function(e){return e.map((function(e){return e.bomb?Object(O.a)({},e,{state:"open"}):e}))}))}(r));break;case"win":o(function(e){return e.map((function(e){return e.map((function(e){return e.bomb?Object(O.a)({},e,{state:"flag"}):e}))}))}(r))}G(Math.floor((new Date).getTime()/1e3))}}),[A]);var Z=Object(n.useCallback)((function(e,t,a){var n=Object(w.a)(r),c=Object(w.a)(n[e]);c[t]=Object(O.a)({},n[e][t],{state:a}),n[e]=c,o(n)}),[r]),_=Object(n.useCallback)((function(e,t){h?"close"===r[e][t].state&&(Z(e,t,"open"),y({i:e,j:t})):(v({i:e,j:t}),y({i:e,j:t}))}),[r,h,Z]);if(Object(n.useEffect)((function(){s&&h&&_(h.i,h.j)}),[s,_,h]),!r)return c.a.createElement(c.a.Fragment,null);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"board"},c.a.createElement("div",{className:"game-info"},c.a.createElement(T,{count:t.bomb-x(r)}),c.a.createElement(F,{onClick:X,gameStatus:A}),c.a.createElement(I,{startUnixTime:V,finishedUnixTime:z})),c.a.createElement("div",{className:S()("cell-area",{end:A})},r.map((function(e,t){return c.a.createElement("div",{key:t,className:"row"},e.map((function(e,a){var n;return c.a.createElement("div",{key:a,className:S()("cell",e.state,(n={bomb:e.bomb&&"open"===e.state,selected:j&&j.i===t&&j.j===a},Object(E.a)(n,"bombCount-".concat(e.value),"open"===e.state),Object(E.a)(n,"notBomb",A&&"flag"===e.state&&!e.bomb),n)),onClick:function(){return function(e,t){A||"open"===r[e][t].state||("flag"===Q?"flag"===r[e][t].state?Z(e,t,"close"):Z(e,t,"flag"):"hold"===Q?"onHold"===r[e][t].state?Z(e,t,"close"):Z(e,t,"onHold"):_(e,t))}(t,a)},onContextMenu:function(e){return function(e,t,a){e.preventDefault(),h&&!A&&Z(t,a,function(e){switch(e){case"close":return"flag";case"flag":return"onHold";case"onHold":return"close";case"open":return e}}(r[t][a].state))}(e,t,a)}},c.a.createElement(D,{cell:e}))})))})))),c.a.createElement(C.MobileView,{viewClassName:"mobile-menu"},c.a.createElement("div",{className:S()("flag-mode",{active:"flag"===Q}),onClick:function(){s&&R("flag"===Q?null:"flag")}},c.a.createElement(k.a,{icon:N.b})),c.a.createElement("div",{className:S()("hold-mode",{active:"hold"===Q}),onClick:function(){s&&R("hold"===Q?null:"hold")}},c.a.createElement(k.a,{icon:N.e}))))},A=function(e){var t=e.defaultMode,a=Object(n.useState)(t),l=Object(p.a)(a,2),r=l[0],o=l[1],i=Object(v.a)().formatMessage;return c.a.createElement(j,null,c.a.createElement("div",{className:"title"},c.a.createElement(d.a,{id:"pages.Top.title"})),c.a.createElement("div",{className:"menu"},c.a.createElement("select",{onChange:function(e){var t=e.target.value;o(t)},defaultValue:r},Object.keys(g).map((function(e,t){return c.a.createElement("option",{key:t,value:e},i({id:"pages.Top.mode.".concat(e)}))})))),c.a.createElement(U,{modeInfo:g[r]}))};A.defaultProps={defaultMode:"easy"};var B=A,J=function(){return c.a.createElement(h,null,c.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.8883bd71.chunk.js.map